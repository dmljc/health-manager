<view class="home-page">
  <view class="health-score-card" wx:for="{{chartBlocks}}" wx:key="title" wx:for-item="item" wx:for-index="index">
    <view class="score-header">
      <text class="score-title">{{item.title}}</text>
    </view>
    <view class="score-chart">
      <block wx:if="{{item.title === 'HBV-DNA定量'}}">
        <line-chart 
          categories="{{item.categories}}" 
          series="{{item.series}}"
          minimal="{{true}}"
          scientific="{{true}}"
          y-max="{{item.yMax}}"
          guide-lines="{{item.guideLines}}"
          canvas-id="{{'chart-' + index}}"
          safe-region="{{item.safeRegion}}"
          background-regions="{{item.backgroundRegions}}"
          y-axis-ticks="{{item.yAxisTicks}}"
          y-axis-max="{{item.yAxisMax}}"
        >
        </line-chart>
      </block>
      <block wx:else>
        <!-- 若为甘油三酯且需要限制最大值，则传入 y-axis-max；否则不传，避免被解析为 0 -->
        <block wx:if="{{item.yAxisMax !== null && item.yAxisMax !== undefined}}">
          <line-chart 
            categories="{{item.categories}}" 
            series="{{item.series}}"
            minimal="{{true}}"
            scientific="{{false}}"
            canvas-id="{{'chart-' + index}}"
            show-background="{{item.showBackground}}"
            safe-region="{{item.safeRegion}}"
            background-regions="{{item.backgroundRegions}}"
            guide-lines="{{item.guideLines}}"
            y-axis-ticks="{{item.yAxisTicks}}"
            y-axis-max="{{item.yAxisMax}}"
            y-axis-min="{{item.yAxisMin}}"
          >
          </line-chart>
        </block>
        <block wx:else>
          <line-chart 
            categories="{{item.categories}}" 
            series="{{item.series}}"
            minimal="{{true}}"
            scientific="{{false}}"
            canvas-id="{{'chart-' + index}}"
            show-background="{{item.showBackground}}"
            safe-region="{{item.safeRegion}}"
            background-regions="{{item.backgroundRegions}}"
            guide-lines="{{item.guideLines}}"
            y-axis-ticks="{{item.yAxisTicks}}"
            y-axis-min="{{item.yAxisMin}}"
          >
          </line-chart>
        </block>
      </block>
    </view>
  </view>
</view>

