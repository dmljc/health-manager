<view class="home-page">
  <view class="health-score-card" wx:for="{{chartBlocks}}" wx:key="title" wx:for-item="item" wx:for-index="index">
    <view class="score-header">
      <text class="score-title">{{item.title}}</text>
    </view>
    <view class="score-chart">
      <!-- HBV-DNA 定量：科学记数法 -->
      <block wx:if="{{item.title === 'HBV-DNA定量'}}">
        <line-chart 
          categories="{{item.categories}}" 
          series="{{item.series}}"
          minimal="{{true}}"
          scientific="{{true}}"
        >
        </line-chart>
      </block>
      <!-- 甘油三酯：限制 y 轴最大值 + 自定义刻度 -->
      <block wx:elif="{{item.title === '甘油三酯'}}">
        <line-chart 
          categories="{{item.categories}}" 
          series="{{item.series}}"
          minimal="{{true}}"
          scientific="{{false}}"
          show-background="{{item.showBackground}}"
          safe-region="{{item.safeRegion}}"
          background-regions="{{item.backgroundRegions}}"
          guide-lines="{{item.guideLines}}"
          y-axis-ticks="{{item.yAxisTicks}}"
          y-axis-max="{{item.yAxisMax}}"
          y-axis-min="{{item.yAxisMin}}"
        >
        </line-chart>
      </block>
      <!-- 尿酸：安全区背景与参考线 -->
      <block wx:elif="{{item.title === '尿酸'}}">
        <line-chart 
          categories="{{item.categories}}" 
          series="{{item.series}}"
          minimal="{{true}}"
          scientific="{{false}}"
          show-background="{{item.showBackground}}"
          safe-region="{{item.safeRegion}}"
          background-regions="{{item.backgroundRegions}}"
          guide-lines="{{item.guideLines}}"
          y-axis-ticks="{{item.yAxisTicks}}"
          y-axis-min="{{item.yAxisMin}}"
        >
        </line-chart>
      </block>
      <!-- 其他指标（如 ALT）：通用折线图 -->
      <block wx:else>
        <line-chart 
          categories="{{item.categories}}" 
          series="{{item.series}}"
          minimal="{{true}}"
          scientific="{{false}}"
        >
        </line-chart>
      </block>
    </view>
  </view>
  <!-- 右下角悬浮新增按钮 -->
  <view class="floating-action-btn" bindtap="openIndicatorForm">
    <text class="floating-action-icon">＋</text>
  </view>
</view>
