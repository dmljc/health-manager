<view class="me-page">
  <!-- Hero 区域：登录前后保持一致 -->
  <view class="hero">
    <view class="avatar-container">
      <view class="avatar-large-btn avatar-hero" wx:if="{{userInfo}}">
        <image class="avatar-large" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
      </view>
      <view class="avatar-large-btn avatar-hero" wx:else>
        <view class="avatar-large placeholder">👤</view>
      </view>
    </view>
    <view class="nickname-section">
      <text class="wxid-text">昵称：</text>
      <view class="pill pill-gradient nickname-pill">{{userInfo ? userInfo.nickName : '登录后显示'}}</view>
    </view>
  </view>

  <!-- 未登录时显示资料完善卡片 -->
  <view id="profile-card" class="card" wx:if="{{!userInfo}}">
    <view class="avatar-select">
      <view class="avatar-container">
        <view class="label">头像</view>
        <button class="avatar-large-btn avatar-hero" hover-class="tap-active" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
          <image wx:if="{{pendingAvatarUrl}}" class="avatar-large" src="{{pendingAvatarUrl}}" mode="aspectFill" />
          <view wx:else class="avatar-large placeholder">👤</view>
          <view class="avatar-plus">+</view>
        </button>
      </view>
    </view>

    <view class="field">
      <view class="label">昵称</view>
      <input class="value" type="nickname" placeholder="填写昵称" placeholder-class="input-ph" bindinput="onNicknameInput" value="{{pendingNickName}}" />
    </view>

    <view class="save-section">
      <button class="save-btn" bindtap="onSubmitProfile" hover-class="tap-active">
        <text class="save-text">保存资料并登录</text>
      </button>
    </view>
  </view>

  <!-- 登录后仅保留一个与“保存资料并登录”样式一致的退出按钮 -->
  <view class="save-section" wx:if="{{userInfo}}">
    <button class="save-btn" bindtap="onLogout" hover-class="tap-active">
      <text class="save-text">退出登录</text>
    </button>
  </view>
</view>